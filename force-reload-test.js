// Clear require cache first
delete require.cache[require.resolve('./models/campaign.js')];
delete require.cache[require.resolve('./models/index.js')];

console.log('ğŸ”„ Cleared require cache...');

// Force reload models
const db = require('./models');

console.log('ğŸ“¦ Models loaded:', Object.keys(db));

// Test campaign loading
db.Campaign.findByPk(3).then(campaign => {
  if (campaign) {
    console.log('âœ… Campaign found:', campaign.name);
    console.log('ğŸ” isReadyToPost type:', typeof campaign.isReadyToPost);
    
    // Check if method exists in constructor prototype
    console.log('ğŸ—ï¸ Constructor prototype methods:');
    console.log(Object.getOwnPropertyNames(campaign.constructor.prototype));
    
    // Try calling the method directly
    if (campaign.isReadyToPost) {
      console.log('âœ… Method works! Result:', campaign.isReadyToPost());
    } else {
      console.log('âŒ Method is missing from instance');
    }
  } else {
    console.log('âŒ Campaign 3 not found');
  }
  process.exit(0);
}).catch(err => {
  console.error('âŒ Error:', err.message);
  process.exit(1);
});